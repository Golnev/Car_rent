Index: car_rent/blog/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.shortcuts import render\r\nfrom django.http import HttpRequest\r\nfrom django.views.generic import ListView, DetailView, TemplateView\r\n\r\nfrom .models import Post, Comment\r\nfrom .forms import CommentForm, ContactForm\r\n\r\n\r\nclass ContextMixin:\r\n    context = {\r\n        'site_title': ('car', 'book'),\r\n        'facebook': 'https://facebook.com',\r\n        'twitter': 'https://twitter.com',\r\n        'instagram': 'https://www.instagram.com/',\r\n        'address': 'Belarus, Minsk',\r\n        'phone': '+375 29 111 11 11',\r\n        'mail': 'email@gmail.com'\r\n    }\r\n\r\n\r\nclass PostListView(ContextMixin, ListView):\r\n    model = Post\r\n    template_name = 'blog/blog.html'\r\n    context_object_name = 'posts'\r\n\r\n    def get_queryset(self):\r\n        return Post.objects.filter(is_published=True).order_by('date_published')\r\n\r\n    def get_context_data(self, *, object_list=None, **kwargs):\r\n        context = super(PostListView, self).get_context_data()\r\n        context.update(self.context)\r\n        context['user'] = self.request.user\r\n        return context\r\n\r\n\r\nclass PostDetailView(ContextMixin, DetailView):\r\n    model = Post\r\n    template_name = 'blog/blog-single.html'\r\n    context_object_name = 'post'\r\n    slug_url_kwarg = 'post_slug'\r\n\r\n    def get_context_data(self, **kwargs):\r\n        context = super(PostDetailView, self).get_context_data()\r\n        context.update(self.context)\r\n        context['comment'] = Comment.objects.all()  # Сделать фильтр только определенный title (model.title())\r\n        context['comment_form'] = CommentForm()\r\n        context['user'] = self.request.user\r\n        return context\r\n\r\n    # !!! Ошибка, PostDetailView.post() got an unexpected keyword argument 'post_slug'\r\n    def post(self, request: HttpRequest):\r\n        form = CommentForm(request.POST)\r\n        if form.is_valid():\r\n            form.save()\r\n        return self.get(request=request)\r\n\r\n\r\nclass ContactCreateView(ContextMixin, TemplateView):\r\n    template_name = 'blog/contact.html'\r\n\r\n    def get_context_data(self, **kwargs):\r\n        context = super(ContactCreateView, self).get_context_data()\r\n        context.update(self.context)\r\n        context['contact_form'] = ContactForm()\r\n        context['user'] = self.request.user\r\n        return context\r\n\r\n    def post(self, request: HttpRequest):\r\n        form = ContactForm(request.POST)\r\n        if form.is_valid():\r\n            form.save()\r\n        return self.get(request=request)\r\n\r\n\r\nclass AboutTemplateView(ContextMixin, TemplateView):\r\n    template_name = 'blog/about.html'\r\n\r\n    def get_context_data(self, **kwargs):\r\n        context = super(AboutTemplateView, self).get_context_data()\r\n        context.update(self.context)\r\n        return context\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/car_rent/blog/views.py b/car_rent/blog/views.py
--- a/car_rent/blog/views.py	(revision 5710d0645ee0128b1cb0e1b02b3c1910fda25fd0)
+++ b/car_rent/blog/views.py	(date 1668319397251)
@@ -1,4 +1,3 @@
-from django.shortcuts import render
 from django.http import HttpRequest
 from django.views.generic import ListView, DetailView, TemplateView
 
